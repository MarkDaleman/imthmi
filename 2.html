<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>IMTHMI</title>
    <meta name="description" content="Hello, World! â€¢ A-Frame">
    <!-- Aframe.io master JS inladen -->
    <script src="dist/aframe-master.js"></script>
    <script src="https://rawgit.com/bryik/aframe-bmfont-text-component/master/dist/aframe-bmfont-text-component.min.js"></script>
    <script src="https://rawgit.com/ngokevin/aframe-text-component/master/dist/aframe-text-component.min.js"></script>
    <script src="js/jquery-3.1.1.min.js"></script>
    <script src="http://popcornjs.org/code/dist/popcorn-complete.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

</head>
<body>
<!-- Hieronder staat een scene -->
<a-scene>
    <!-- Hieronder staan de voorgedefinieerde attributen-->
    <a-assets>
        <!--Achtergrond video (1) voor de school-->
        <video id="video2" src="movies/video2.mp4"
               loop crossorigin></video>
    </a-assets>

    <!--Hieronder staat de camera-->
    <a-camera>
        <!-- Hieronder zorgen wij er voor dat je met de cursor elementen kan selecteren -->
        <!-- LET OP -->
        <!-- Het element moet niet dichterbij zijn geplaatst dan de ring, anders gaat de ring er voor langs en werkt het niet -->
        <a-entity cursor="fuse: true; maxDistance: 30; timeout: 500" position="0 0 -15" geometry="primitive: ring" material="color: white; shader: flat">
            <a-animation begin="click" easing="ease-in" attribute="scale" fill="backwards" from="0.1 0.1 0.1" to="1 1 1"></a-animation>
            <a-animation begin="fusing" easing="ease-in" attribute="scale" fill="forwards" from="1 1 1" to="0.1 0.1 0.1"></a-animation>
        </a-entity>
        <!--Hieronder staat een a-box die wordt gebruikt om text op weer te geven.-->
            <a-box id="userText" position="0.02 -2.60 -5.48" rotation="0 90 0" scale="0 2.5 10" opacity="0.3" color="grey" geometry="mergeTo:null"></a-box>
        <!--Hieronder staat het text element wat boven de box komt te staan.    -->
        <a-entity id="textTechniek" scale= "1 1 1" position="-1.99 -1.73 -4.37" visible='false' bmfont-text="width: 800; color: white; opacity: 1; text:
      In dit lokaal vinden de meeste lessen voor de specialities plaats. Vanaf het tweede jaar, maar ook in het eerste jaar zul je hier vaak te vinden zijn als student." position="2 -1 -12.63" rotation="0 0 0" scale="3 3 3"></a-entity>

	  <a-image id="miniMap" src="minimap/minimap_v2.png" position="-7 -3 -5" scale="2 2 2"></a-image>
    </a-camera>

    <!--Hieronder worden ingeladen attributen geselecteerd-->
    <a-videosphere src="#video2" rotation="0 270 0"></a-videosphere>

    <!--Box voor Techniekruimte-->
    <a-box id="boxTechniek" position="127 28.72 -44.59" scale="1 30 100" rotation="0 45 0 "  material="opacity: 0.5" geometry="mergeTo:null" ></a-box>

    <!--Box voor Video 1-->
    <a-box id="boxVideo1" position="-64.01 5.83 -16.07" scale="10 15 1" rotation="0 70 0" material="opacity: 0.5" geometry="mergeTo:null" ></a-box>
    <!--Text voor Video 1-->
    <a-entity id="textVideo1" bmfont-text="width: 750; color: white; opacity: 1; text: Terug naar het begin" position="-62.77 -1.83 -5.47" rotation="0 70 0" scale="10 10 10"></a-entity>

    <!--Box voor Gebouw H-->
    <a-box id="boxH" position="101.80 14.48 28.91" scale="28 31 1" rotation ="0 70 0" material="opacity: 0.5" geometry="mergeTo:null" ></a-box>

    <!--Box voor Gebouw J-->
    <a-box id="boxJ" position="57.15 17.62 41" scale="25 32 1" rotation ="0 40 0" material="opacity: 0.5" geometry="mergeTo:null" ></a-box>
    <a-entity id="textJ" visible='false' bmfont-text="width: 400; color: white; opacity: 1; text:
      Het H-gebouw heeft twee functies. De onderste verdieping fungeert als collegeruimte voor de studenten van de Hogeschool, als student kan het voorkomen dat je hier regelmatig college moet volgen."
              position="52 3.78 26.11" rotation="0 -140 0" scale="10 10 10"></a-entity>

      <!--Box voor Video 1-->
      <a-box id="boxVideo1" position="-64.01 5.83 -16.07" scale="10 15 1" rotation="0 70 0" material="opacity: 0.5" geometry="mergeTo:null" ></a-box>
      <!--Text voor Video 1-->
      <a-entity id="textVideo1" bmfont-text="width: 750; color: white; opacity: 1; text: Terug naar het begin" position="-62.77 -1.83 -5.47" rotation="0 70 0" scale="10 10 10"></a-entity>

	  <!--Box voor Video 3-->
	  <a-box id="boxVideo3" position="-3 2 -16.07" scale="3 1.5 0" rotation="0 -20 0" material="opacity: 0.5" geometry="mergeTo:null" ></a-box>
	  <!--Text voor Video 3-->
      <a-entity id="textVideo3" bmfont-text="width: 750; color: white; opacity: 1; text: Naar de hal" position="-4.4 0.75 -16.07" rotation="0 -20 0" scale="3 3 3"></a-entity>


      <!--Box voor Gebouw H-->
      <a-box id="boxH" position="101.80 14.48 28.91" scale="28 31 1" rotation ="0 70 0" material="opacity: 0.5" geometry="mergeTo:null" ></a-box>
      <a-entity id="textH" visible='false' bmfont-text="width: 400; color: white; opacity: 1; text:
      Het H-gebouw heeft twee functies. De onderste verdieping fungeert als collegeruimte voor de studenten van de Hogeschool, als student kan het voorkomen dat je hier regelmatig college moet volgen."
      position="75.72 0.47 12.42" rotation="0 -115 0" scale="10 10 10"></a-entity>

</a-scene>
<!-- Einde van de scene -->
</body>
</html>

<!--Scripts voor het loopen van de video.-->
<script>
    $( document ).ready(function(){
        var video =  document.querySelector("#video2");
        var kaas = true;
        //Deze functie blijft aan de video vragen hoe ver hij is en zet hem dan in een loop voor de laatste 20 seconden.
        video.addEventListener("timeupdate", function () {
            if ($('#video2')[0].currentTime >= 48 && kaas) {
                console.log(this.currentTime);
                this.pause();
                this.currentTime = 30;
                this.play();
            }
        });

    });

</script>

<!--Script wat gaat over het aansturen van de texten in de dozen e.d-->
<script type="text/javascript">
    //maak de usertextbox onzichtbaar
    document.getElementById('userText').setAttribute('visible', 'false');
    //variabelen om bij te houden of een doos open is en of er text op te zien is.
    var open = false;
    var showText = 0;
	var naar1 = document.getElementById('boxVideo1');
	var naar3 = document.getElementById('boxVideo3');

	naar1.addEventListener('click', function() {
		window.location.href = 'https://markdaleman.github.io/imthmi/1.html';
	});

	naar3.addEventListener('click', function() {
		window.location.href = 'https://markdaleman.github.io/imthmi/3.html';
	});

    //maak een listener voor de boxen , best wel duidelijk.
    document.querySelector('#boxTechniek').addEventListener('click', function () {
        if (!open) {
            changeText(1);
            openDoos();
        }

        else if(open && showText != 1){
            changeText(1);
        }

        else if(open){
            doeiText(1);
            sluitDoos();
        }

    });

    document.querySelector('#boxH').addEventListener('click', function () {
        if (!open) {
            changeText(2);
            openDoos();
        }

        else if(open && showText != 2){
            changeText(2);
        }

        else if(open){
            doeiText(2);
            sluitDoos();
        }
    });

    document.querySelector('#boxJ').addEventListener('click', function () {
        if (!open) {
            changeText(3);
            openDoos();
        }

        else if(open && showText != 3){
            changeText(3);
        }

        else if(open){
            doeiText(3);
            sluitDoos();
        }

    });

    document.querySelector('#boxVideo1').addEventListener('click', function () {
        var text = document.getElementById("textVideo1");
        text.setAttribute('visible', 'true');
    });
//    Functie voor het openen van dozen.
    function openDoos(){
        var userText = document.getElementById("userText");
        userText.setAttribute('visible', 'true');
        open = true;
    }
//   Functie voor het sluiten van dozen.
    function sluitDoos(){
        var userText = document.getElementById("userText");
        userText.setAttribute('visible', 'false');
        open = false;
    }
// functie die de text aanpast.
    function changeText(doos){

        if (doos == 1){
            var textTechniek = document.getElementById("textTechniek");
            var userText = document.getElementById("userText");
            userText.setAttribute('scale','0 1.5 5');
            userText.setAttribute('position','0.02 -1.33 -5.53');
            textTechniek.setAttribute('bmfont-text', 'text', 'In dit lokaal vinden de meeste lessen voor de specialities plaats. Vanaf het tweede jaar, maar ook in het eerste jaar zul je hier vaak te vinden zijn als student.');
            textTechniek.setAttribute('visible', 'true');
            showText = 1;
        }

        else if(doos == 2){
            var textTechniek = document.getElementById("textTechniek");
            var userText = document.getElementById("userText");
            userText.setAttribute('position','0.02 -1.16 -5.52');
            userText.setAttribute('scale','0 1.5 5');
            textTechniek.setAttribute('bmfont-text', 'text', 'Het H-gebouw heeft twee functies. De onderste verdieping fungeert als collegeruimte voor de studenten van de Hogeschool, als student kan het voorkomen dat je hier regelmatig college moet volgen.');
            textTechniek.setAttribute('visible', 'true');
            showText = 2;
        }

        else if(doos ==3){
            var textTechniek = document.getElementById("textTechniek");
            var userText = document.getElementById("userText");
            userText.setAttribute('position','0.02 -1.16 -5.52');
            userText.setAttribute('scale','0 1.5 5');
            textTechniek.setAttribute('bmfont-text', 'text', 'Het J-gebouw heeft twee functies. De onderste verdieping fungeert als collegeruimte voor de studenten van de Hogeschool, als student kan het voorkomen dat je hier regelmatig college moet volgen.');
            textTechniek.setAttribute('visible', 'true');
            showText = 3;
        }


    }
// functie die alleen de text weghaalt.
    function doeiText(doos){
        if (doos == 1){
            var textTechniek = document.getElementById("textTechniek");
            textTechniek.setAttribute('visible', 'false');
        }

        else if(doos == 2){
            var textTechniek = document.getElementById("textTechniek");
            textTechniek.setAttribute('visible', 'false');
        }

        else if(doos ==3){
            var textTechniek = document.getElementById("textTechniek");
            textTechniek.setAttribute('visible', 'false');
        }
    }

</script>
