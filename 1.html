<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>IMTHMI</title>
    <meta name="description" content="Hello, World! â€¢ A-Frame">
    <!-- Aframe.io master JS inladen -->
    <script src="dist/aframe-master.js"></script>
    <script src="https://rawgit.com/bryik/aframe-bmfont-text-component/master/dist/aframe-bmfont-text-component.min.js"></script>
    <script src="https://rawgit.com/ngokevin/aframe-text-component/master/dist/aframe-text-component.min.js"></script>
    <script src="js/jquery-3.1.1.min.js"></script>
    <script src="http://popcornjs.org/code/dist/popcorn-complete.js"></script>

  </head>
  <body>
    <!-- Hieronder staat een scene -->
    <a-scene>
      <!-- Hieronder staan de voorgedefinieerde attributen-->
      <a-assets>
        <!--Achtergrond video (1) voor de school-->
        <video id="video1" src="movies/video1.mp4"
                loop crossorigin></video>
      </a-assets>

      <a-camera>
        <!-- Hieronder zorgen wij er voor dat je met de cursor elementen kan selecteren -->
        <!-- LET OP -->
        <!-- Het element moet niet dichterbij zijn geplaatst dan de ring, anders gaat de ring er voor langs en werkt het niet -->
        <a-entity cursor="fuse: true; maxDistance: 30; timeout: 500" position="0 0 -15" geometry="primitive: ring" material="color: white; shader: flat">
          <a-animation begin="click" easing="ease-in" attribute="scale" fill="backwards" from="0.1 0.1 0.1" to="1 1 1"></a-animation>
          <a-animation begin="fusing" easing="ease-in" attribute="scale" fill="forwards" from="1 1 1" to="0.1 0.1 0.1"></a-animation>
        </a-entity>
      </a-camera>

      <!--Hieronder worden ingeladen attributen geselecteerd-->
      <a-videosphere id="video2" src="#video1" rotation="0 180 0"></a-videosphere>

      <!--Scripts voor pauze-->
      <script>
        $( document ).ready(function(){
          var video =  document.querySelector("#video1");
          var kaas = true;
          //Deze functie blijft aan de video vragen hoe ver hij is en zet hem dan op pauze wanneer het praten is afgelopen.
          video.addEventListener("timeupdate", function () {
              if ($('#video1')[0].currentTime >= 21 && kaas) {
                $('#video1')[0].pause();
                kaas = false;
              }
              //deze functie laat na het klikken de video ook weer pauzeren wanneer de mannen de school binnnen zijn gelopen
              if ($('#video1')[0].currentTime >= 34 && !kaas) {
                  $('#video1')[0].pause();
                }
            });


          //Deze functies hangen een listener aan de verschillende overlays die over de personen liggen.
          //wanneer er op een kader wordt gedrukt wordt de video afgespeeld en de desbetreffende video ingeladen en afgespeeld.

          //Noord
          var textNoord = document.getElementById("textNoord");
          document.querySelector('#boxNoord').addEventListener('click', function() {
            console.log("noord ingedrukt");
            textNoord.setAttribute('bmfont-text','text','Sorry. Werkt niet.');
          });

          //Oost
          document.querySelector('#boxOost').addEventListener('click', function() {
            console.log("oost ingedrukt");
            $('#video1')[0].play();
          });

          //Zuid
          var textZuid = document.getElementById("textZuid");
          document.querySelector('#boxZuid').addEventListener('click', function() {
            console.log("zuid ingedrukt");
            textZuid.setAttribute('bmfont-text','text','Sorry. Werkt niet.');
          });
          //West
          document.querySelector('#boxWest').addEventListener('click', function() {
            console.log("west ingedrukt");
            $('#video1')[0].play();
          });
        });

      </script>

      <!--Doos voor school (noord)-->
      <a-box id="boxNoord" position="35 0 0" scale="1 15 10"material="opacity: 0" geometry="mergeTo:null" ></a-box>

      <!--text voor doos noord-->
      <a-entity id="textNoord" bmfont-text="text: Leiden Centraal" position="37 -10 -3" rotation="0 -90 0" scale="10 10 10"></a-entity>

      <!--Doos voor fietsen (oost)-->
      <a-box id="boxOost" position="0 0 -23" scale="10 15 1"material="opacity: 0" geometry="mergeTo:null" ></a-box>
      <!--text voor doos oost-->
      <a-entity id="textOost" bmfont-text="text: Achterkant school" position="-5 -10 -25" rotation="0 0 0" scale="10 10 10"></a-entity>

      <!--Doos voor uitgang (zuid)-->
      <a-box id="boxZuid" position="0 0 20" scale="10 15 1"material="opacity: 0" geometry="mergeTo:null" ></a-box>
      <!--text voor doos zuid-->
      <a-entity id="textZuid" bmfont-text="text: Z-Gebouw" position="5 -10 20" rotation="0 180 0" scale="10 10 10"></a-entity>

      <!--Doos voor Zgebouw (west)-->
      <a-box id="boxWest" position="-20 0 0" scale="1 15 10" material="opacity: 0" geometry="mergeTo:null" ></a-box>
      <!--text voor doos west-->
      <a-entity id="textWest" material="color:white" bmfont-text="text: Naar binnen" position="-20 -10 5" rotation="0 90 0" scale="10 10 10"></a-entity>

    </a-scene>
    <!-- Einde van de scene -->
  </body>
</html>

<script>
	var naar2 = document.getElementById('boxOost');
	var naar3 = document.getElementById('boxWest');
	
	naar2.addEventListener('click', function () {
		window.location.href = 'http://localhost/imthmi/2.html';
	});
	
	naar3.addEventListener('click', function () {
		window.location.href = 'http://localhost/imthmi/3.html';
	});
</script>
